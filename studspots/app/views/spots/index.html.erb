<head>
	<style type="text/css">
		html, body { height: 100%; margin: 0; padding: 0; }
		#map { height: 500px; width:1000px;}
	</style>
</head>

<div id="map"></div>

<input type="button" value="Update">
<h1>Welcome</h1>

<%@spots.each do |spot| %>
<%=spot['name']%><br>
<%=spot["address"] %>
<%=spot["store_hours"] %>
<%=spot["longitude"] %>
<%=spot["latitude"] %>
<%=spot["wifi"] %>
<%=spot["quiet"] %>
<%=spot["outlets"] %>
<%=spot["outdoor_indoor"] %>
<%=spot["likes"] %>
<%=spot["dislikes"] %><br><br>

<%end%>


<script type="text/javascript">

    var map;

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: {lat:<%=@lat%>, lng:<%=@long%>},
        zoom: 14
      });
	var marker = new google.maps.Marker({position: {lat:<%=@lat%>, lng:<%=@long%>},
		map: map,
		title: 'Your Position',
		});

	<% @spots.each do |spot| %>   
	   
	   	var marker = new google.maps.Marker({position: {lat:<%=spot['latitude']%>, lng:<%=spot['longitude']%>}, map: map,title: '<%=spot['name']%>'
		});
	    google.maps.event.addListener(marker, 'click', function() {
	    	window.location.href = "/spots/<%=spot['id']%>";
	    });

    <%end%>

    }

</script>

<script async defer
      src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap">
</script>



